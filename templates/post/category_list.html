{% extends 'base.html' %}
{% load static %}

{% block customCSS %}
<link rel="stylesheet" href="{% static 'css/include/categories.css' %}" />
<link rel="stylesheet" href="{% static 'css/include/sorts.css' %}" />
<link rel="stylesheet" href="{% static 'css/include/pie_chart.css' %}">
<link rel="stylesheet" href="{% static 'css/post/post_list.css' %}" />
{% endblock %}

{% block content %}
<div class="row">
    {% include 'include/category.html' %}
    {% include 'include/sort.html' %}
</div>

<div class="row justify-content-center p-0">
    {% if posts %}
    <div class="infinite-container columns col-12 p-0 m60">
        {% for post in posts %}
        <figure id="post-{{ post.pk }}" class="infinite-item">
            {% include 'include/post.html' %}
        </figure>
        {% endfor %}
        {% if posts.has_next %}
        <a class="infinite-more-link d-none" href="?page={{ posts.next_page_number }}">더 보기</a>
        {% endif %}
    </div>
    {% else %}
    <div class="container text-center my-5 py-5">
        <h3>아직 게시물이 없습니다..</h3>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block customJS %}
<script src="{% static 'js/include/easy_pie_chart.js' %}"></script>
<script src="{% static 'js/include/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'js/include/infinite.min.js' %}"></script>
<script src="{% static 'js/post/post_detail.js' %}"></script>
<script>
    var infinite = new Waypoint.Infinite({
        element: $('.infinite-container')[0],
        onBeforePageLoad: function () {

        },
        onAfterPageLoad: function ($items) {
            customChart();
        }
    });
</script>
{% endblock %}